<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Sala VIP 췅 Caja Misteriosa</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{ --gold1:#d4af37; --gold2:#f6e27a; --gold3:#b8891d; --bg:#0a0a0a; }
*{box-sizing:border-box}

/* Fondo con tu imagen (aplicado en html para asegurar render) */
html, body{ height:100%; }
html{
  background:url("f1ec4f7e-3b11-414c-bb1c-3db302c97c66.jpg") center/cover no-repeat #000;
}
body{
  margin:0; min-height:100%; display:flex; align-items:center; justify-content:center; flex-direction:column;
  color:#fff; font-family:'Poppins', system-ui, Arial; text-align:center; padding:22px;
  position: relative; overflow:hidden;
}
/* Capa oscura + blur por encima del fondo */
body::after{
  content:""; position:fixed; inset:0;
  background: rgba(0,0,0,0.65);
  backdrop-filter: blur(3px);
  z-index:0;
}

/* Asegurar que el contenido quede por encima de la capa oscura */
.header, .wrap, #confetti, #smoke { position:relative; z-index:1; }

.header{max-width:720px}
.logo{font-weight:700; letter-spacing:.12em; font-size:13px; color:#f2d98b; margin-bottom:6px; opacity:.9}
h1{font-size:26px; margin:4px 0 6px}
p{opacity:.92; margin:0 0 14px}
.wrap{display:flex; flex-direction:column; align-items:center; gap:16px; margin-top:10px}

.stage{position:relative; width:320px; height:320px; display:grid; place-items:center}
.spot{
  position:absolute; inset:-15% -20% auto -20%; height:220px; border-radius:50%;
  background: radial-gradient(closest-side, rgba(255,255,200,.22), transparent 75%);
  filter: blur(1px); animation: aura 4s ease-in-out infinite alternate;
}
@keyframes aura { to{ opacity:.35; transform: translateY(-6px) scale(1.03);} }

/* Caja */
.box{
  position:relative; width:220px; height:160px;
  background: linear-gradient(180deg, #3a2e15 0%, #1f1a0f 100%);
  border:3px solid rgba(242,217,139,.55);
  border-radius:12px; 
  box-shadow:0 0 26px rgba(212,175,55,.35), inset 0 0 30px rgba(0,0,0,.6);
  transform-style: preserve-3d;
  animation: pulse 1.2s ease-in-out infinite alternate;
}
@keyframes pulse {
  0% { box-shadow:0 0 20px rgba(212,175,55,.4); }
  100% { box-shadow:0 0 40px rgba(255,215,0,.85); }
}

.lid{
  position:absolute; left:-6px; right:-6px; top:-42px; height:54px;
  background: linear-gradient(180deg, #b8891d 0%, #d4af37 55%, #8c6a1b 100%);
  border:3px solid rgba(242,217,139,.8);
  border-radius:10px; transform-origin: 50% 100%; transform: rotateX(0deg);
  box-shadow:0 12px 18px rgba(0,0,0,.55), inset 0 0 16px rgba(255,255,255,.25);
}

.ribbon{ position:absolute; inset:-42px -6px auto -6px; height:54px; border-radius:10px; background: repeating-linear-gradient(90deg, rgba(0,0,0,.18) 0 8px, rgba(255,255,255,.18) 8px 16px, rgba(0,0,0,.18) 16px 24px, transparent 24px 32px); mix-blend-mode: soft-light;}
.shine{ position:absolute; inset:12px; border-radius:8px; background: linear-gradient(110deg, rgba(255,255,255,.15) 0%, rgba(255,255,255,0) 30% 70%, rgba(255,255,255,.12) 100%);}

.glow{
  position:absolute; top:-20px; width:180px; height:180px; border-radius:50%;
  background: radial-gradient(circle, rgba(255,215,0,.75) 0%, rgba(255,215,0,.08) 55%, transparent 70%);
  opacity:0; transform: translateY(18px) scale(.85);
}
.box.open .glow{ animation: popGlow .9s ease-out forwards .25s; }
@keyframes popGlow{ to{ opacity:1; transform: translateY(-4px) scale(1); }}

/* Tapa abriendo */
.box.open .lid{ animation: openLid .9s cubic-bezier(.2,.8,.2,1) forwards; }
@keyframes openLid{ 0%{ transform: rotateX(0deg);} 60%{ transform:rotateX(-75deg);} 100%{ transform:rotateX(-62deg);}}

/* Premio */
.prize{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-20%) scale(.8);
  width:210px; padding:14px 16px; border-radius:14px;
  background: linear-gradient(180deg, rgba(242,217,139,.18), rgba(242,217,139,.05));
  border:1px solid rgba(242,217,139,.45);
  text-align:center; opacity:0;
  box-shadow:0 0 24px rgba(212,175,55,.45);
}
.box.open .prize{ animation: reveal .7s ease-out forwards .55s; }
@keyframes reveal{ 0%{opacity:0; transform:translate(-50%,-10%) scale(.9);} 100%{opacity:1; transform:translate(-50%,-50%) scale(1);} }

.prize h2{ margin:6px 0 4px; font-size:22px; color:#f7f3d6 }
.prize small{ opacity:.85 }

/* Bot칩n */
.btn{
  background: linear-gradient(90deg, var(--gold1), var(--gold2)); color:#111;
  border:none; border-radius:12px; padding:12px 20px; font-weight:800; cursor:pointer;
  box-shadow:0 0 18px rgba(212,175,55,.55); transition:transform .15s ease, box-shadow .2s ease;
}
.btn:hover{ transform:translateY(-1px) scale(1.02); box-shadow:0 0 28px rgba(212,175,55,.85) }
.btn:disabled{opacity:.55; cursor:not-allowed}

.result{font-size:18px; font-weight:700; margin-top:10px; color:#b6ffbc}
.footer{opacity:.55; font-size:12px; margin-top:18px}

/* Confetti */
#confetti { position: fixed; top:0; left:0; width:100vw; height:100vh; pointer-events:none;}
.confetti-piece{ position:absolute; width:8px; height:14px; background:var(--gold2); opacity:.9; animation:fall 2.4s linear forwards; border-radius:2px; }
@keyframes fall{ 0%{transform:translateY(-10vh) rotate(0deg);} 100%{transform:translateY(100vh) rotate(360deg); opacity:0;} }

/* HUMO DORADO */
#smoke { position:absolute; left:50%; top:50%; width:0; height:0; transform:translate(-50%, -60%); pointer-events:none; }
.smoke-puff{
  position:absolute; width:14px; height:14px; border-radius:50%;
  background: radial-gradient(circle, rgba(255,215,0,.55) 0%, rgba(255,215,0,.15) 40%, rgba(255,215,0,0) 70%);
  filter: blur(1px);
  animation: puff 2.2s ease-out forwards;
  opacity:.8;
}
@keyframes puff{
  0%{ transform:translate(0,0) scale(.6); opacity:.85; }
  70%{ opacity:.45; }
  100%{ transform:translate(var(--dx), var(--dy)) scale(1.8); opacity:0; }
}
</style>
</head>
<body>

<div class="header">
  <div class="logo">SALA VIP 췅 ACCESO CONCEDIDO</div>
  <h1>Caja Misteriosa VIP</h1>
  <p>Un intento por d칤a. Acceso exclusivo.</p>
</div>

<div class="wrap">
  <div class="stage">
    <div class="spot"></div>

    <div id="box" class="box">
      <div class="lid"></div>
      <div class="ribbon"></div>
      <div class="shine"></div>
      <div class="glow"></div>

      <div class="prize" id="prizeCard">
        <h2>游꾸 Premio: 500 fichas</h2>
        <small>Beneficio VIP vigente</small>
      </div>
    </div>

    <!-- Contenedor del humo -->
    <div id="smoke"></div>
  </div>

  <button class="btn" id="openBtn">Abrir caja</button>
  <div id="message" class="result"></div>

  <a id="whatsappBtn" href="#" class="btn" style="display:none; margin-top:10px;">
    Validar premio por WhatsApp
  </a>

  <div class="footer">Dise침o Casino Elite</div>
</div>

<div id="confetti"></div>

<script>
// Control diario (1 apertura por d칤a)
const todayKey=(()=>{const d=new Date();return`${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`})();
const openKey='vip_box_open_'+todayKey;

const openBtn=document.getElementById('openBtn');
const message=document.getElementById('message');
const box=document.getElementById('box');
const whatsappBtn=document.getElementById('whatsappBtn');
const smoke=document.getElementById('smoke');

if(localStorage.getItem(openKey)==='used'){
  openBtn.disabled=true;
  message.textContent="Intento usado hoy. Volv칠 ma침ana.";
}

openBtn.addEventListener('click',()=>{
  if(openBtn.disabled)return;

  localStorage.setItem(openKey,'used');
  openBtn.disabled=true;

  // Abrir caja
  box.classList.add('open');

  // Humo dorado
  launchSmoke(28);

  // Mostrar premio + confetti + WhatsApp
  setTimeout(()=>{
    message.innerHTML="Premio otorgado: <strong>500 fichas</strong>";
    launchConfetti(90);
    whatsappBtn.style.display="inline-block";
    whatsappBtn.href="https://wa.me/541167907135?text=Hola!%20gan%C3%A9%20500%20fichas%20en%20la%20Caja%20Misteriosa%20VIP";
  },900);
});

// Confetti
function launchConfetti(amount){
  const confetti=document.getElementById('confetti');
  for(let i=0;i<amount;i++){
    const piece=document.createElement('div');
    piece.classList.add('confetti-piece');
    piece.style.left=Math.random()*100+'vw';
    piece.style.background=Math.random()>.5?'gold':'#f6e27a';
    confetti.appendChild(piece);
    setTimeout(()=>piece.remove(),2400);
  }
}

// Humo dorado (part칤culas ascendentes)
function launchSmoke(amount){
  for(let i=0;i<amount;i++){
    const puff=document.createElement('div');
    puff.className='smoke-puff';
    const angle=(Math.random()*Math.PI) - (Math.PI/2); // hacia arriba a ambos lados
    const radius=60 + Math.random()*60; // distancia
    const dx=Math.cos(angle)*radius;
    const dy=(Math.sin(angle)*radius) - (60 + Math.random()*30); // subir m치s
    puff.style.setProperty('--dx', dx+'px');
    puff.style.setProperty('--dy', dy+'px');
    puff.style.left=( -10 + Math.random()*20 )+'px';
    puff.style.top=( -10 + Math.random()*20 )+'px';
    puff.style.animationDuration=(1.6 + Math.random()*1.2)+'s';
    smoke.appendChild(puff);
    setTimeout(()=>puff.remove(), 2400);
  }
}
</script>
</body>
</html>
